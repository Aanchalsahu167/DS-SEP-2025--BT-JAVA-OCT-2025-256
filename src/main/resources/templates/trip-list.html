<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Trip Management System</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        body { background-color: #f4f7f6; }
        .navbar { background: #2c3e50; margin-bottom: 30px; }
        .card { border-radius: 15px; border: none; }
        .btn-add { background-color: #27ae60; color: white; }
        .table thead { background-color: #34495e; color: white; }
        .search-container { background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px; }
    </style>
</head>
<body>

<nav class="navbar navbar-dark shadow-sm">
    <div class="container">
        <span class="navbar-brand mb-0 h1">üåç Trip Planner Pro</span>
    </div>
</nav>

<div class="container">
    <div class="row">
        <div class="col-md-12">
            
            <div class="search-container shadow-sm d-flex justify-content-between align-items-center">
                <form th:action="@{/trips/search}" method="get" class="d-flex gap-2 w-50">
                    <input type="text" name="keyword" th:value="${keyword}" class="form-control" placeholder="Where do you want to go?">
                    <button type="submit" class="btn btn-primary">Search</button>
                    <a th:href="@{/trips}" class="btn btn-outline-secondary">Reset</a>
                </form>
                <a href="/trips/add" class="btn btn-add shadow-sm">+ Add New Trip</a>
            </div>

<div class="row mb-4">
    <div class="col-md-4">
        <div class="card bg-success text-white shadow-sm">
            <div class="card-body text-center">
                <h6 class="text-uppercase small">Total Trip Expenses</h6>
                <h2 class="display-6 fw-bold" th:text="${'‚Çπ' + #numbers.formatDecimal(totalBudget, 0, 'COMMA', 2, 'POINT')}">‚Çπ0.00</h2>
            </div>
        </div>
    </div>
</div>

<div class="row mb-4">
    <div class="col-md-4">
        <div class="card bg-primary text-white shadow-sm border-0">
            <div class="card-body text-center">
                <h6 class="text-uppercase small">Total Trips</h6>
                <h2 class="fw-bold" th:text="${totalTrips}">0</h2>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card bg-success text-white shadow-sm border-0">
            <div class="card-body text-center">
                <h6 class="text-uppercase small">Total Expenses</h6>
                <h2 class="fw-bold" th:text="${'‚Çπ' + totalBudget}">‚Çπ0</h2>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card bg-warning text-dark shadow-sm border-0">
            <div class="card-body text-center">
                <h6 class="text-uppercase small">Completed</h6>
                <h2 class="fw-bold" th:text="${completed}">0</h2>
            </div>
        </div>
    </div>
</div>
            <div class="card shadow-sm">
                <div class="card-body p-0">
                    <h5 class="card-title">Total Estimated Budget</h5>
                    <h3 class="mb-0" th:text="${'‚Çπ' + totalBudget}">‚Çπ0.0</h3>
                    <table class="table table-hover mb-0">
                        <thead>
                            <tr>
                                <th>Trip Name</th>
                                <th>Destination</th>
                                <th>Start Date</th>
                                <th>Price (‚Çπ)</th>
                                <th class="text-center">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="trip : ${trips}">
                                <td th:text="${trip.name}" class="fw-bold"></td>
                                <td th:text="${trip.destination}"></td>
                                <td th:text="${trip.startDate}"></td>
                                <td th:text="${'‚Çπ' + trip.price}"></td>
                                <td th:text="${totalBudget}"></td>
                                <td class="text-center">
                                    <div class="btn-group" role="group">
                                        <a th:href="@{/trips/edit/{id}(id=${trip.id})}" class="btn btn-warning btn-sm">Edit</a>
                                        <a th:href="@{/trips/delete/{id}(id=${trip.id})}" 
                                           class="btn btn-danger btn-sm" 
                                           onclick="return confirm('ARE YOU SURE YOU WANT TO DELETE THIS TRIP?')">Delete</a>
                                    </div>
                                </td>
                            </tr>
                            <tr th:if="${#lists.isEmpty(trips)}">
                                <td colspan="5" class="text-center p-4 text-muted">No trips found. Try searching for something else!</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
        </div>
    </div>
</div>

</body>
</html>